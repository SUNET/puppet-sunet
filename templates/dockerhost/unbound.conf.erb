# ###################################################
# #
# # This file is managed with
# #
# #  #####   #    #  #####   #####   ######   #####
# #  #    #  #    #  #    #  #    #  #          #
# #  #    #  #    #  #    #  #    #  #####      #
# #  #####   #    #  #####   #####   #          #
# #  #       #    #  #       #       #          #
# #  #        ####   #       #       ######     #
# #
# # ... so you can't just change it locally.
# #
# ###################################################
server:
       # Explicitly listen to interfaces. Otherwise, docker containers will get responses to
       # DNS queries with a source IP address different than the one they sent the request
       # to, which will get dropped.
       <% if @ipaddress_eth0 -%>interface: <%= @ipaddress_eth0 %><% end %>
       <% if @ipaddress_docker0 -%>interface: <%= @ipaddress_docker0 %><% end %>
       <% if @ipaddress_br0 -%>interface: <%= @ipaddress_br0 %><% end %>
       <% if @ipaddress_bond0 -%>interface: <%= @ipaddress_bond0 %><% end %>
       <% if @ipaddress_em1 -%>interface: <%= @ipaddress_em1 %><% end %>
       <% if @ipaddress_em2 -%>interface: <%= @ipaddress_em2 %><% end %>
       interface: ::1
       access-control: 172.16.0.0/12 allow
       <% if @ipaddress_eth0 -%>access-control: <%= @ipaddress_eth0 %>/32 allow<% end %>
       <% if @ipaddress_docker0 -%>access-control: <%= @ipaddress_docker0 %>/32 allow<% end %>
       <% if @ipaddress_br0 -%>access-control: <%= @ipaddress_br0 %>/32 allow<% end %>
       <% if @ipaddress_bond0 -%>access-control: <%= @ipaddress_bond0 %>/32 allow<% end %>
       <% if @ipaddress_em1 -%>access-control: <%= @ipaddress_em1 %>/32 allow<% end %>
       <% if @ipaddress_em2 -%>access-control: <%= @ipaddress_em2 %>/32 allow<% end %>
