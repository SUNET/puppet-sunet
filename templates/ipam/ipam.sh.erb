#!/bin/bash

/usr/local/sbin/nipap2bind
named-checkconf /etc/bind/named.conf.zones && named-checkconf /etc/bind/named.conf && named-checkconf /etc/bind/named.conf.options
if [ $? -eq 0 ]; then
    /usr/sbin/rndc reload
    cd /etc/bind/generated
    /usr/bin/git add .
    /usr/bin/git diff-index --quiet HEAD || /usr/bin/git commit -a -m "Updated zone files"
else
    exit 1
fi