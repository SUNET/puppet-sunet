---
# Docs: http://cloudinit.readthedocs.io/en/latest/topics/network-config-format-v1.html#network-config-v1
#       http://cloudinit.readthedocs.io/en/latest/topics/network-config-format-v2.html#network-config-v2
#
version: 1
config:
 - type: physical
   mac_address: '<%= @mac %>'
   name: eth0
   subnets:
    - control: auto
<% if @ip6 == 'auto' -%>
      # type dhcp6 != SLAAC, but it doesn't look like cloudinit/net/network_state.py can do SLAAC
      type: dhcp6
<% elsif @ip6 -%>
      type: static
      address: |
        <%= @ip6 %>
      ipv6: True
<% elsif @ip -%>
      type: static
      address: '<%= @ip %>'
<% if @netmask -%>      netmask: '<%= @netmask %>'<% end %>
<% if @gateway -%>      gateway: '<%= @gateway %>'<% end %>
<% elsif @dhcp -%>
      type: dhcp4
<%end -%>
<% if @resolver -%>
 - type: nameserver
   address:
<% @resolver.each do |addr| %>    - <%= addr %>
<% if @search -%>
   search: <%= @search %>
<% end %>
<% end %>
<%end %>
